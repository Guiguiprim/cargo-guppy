<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Configuration for `cargo hakari`."><meta name="keywords" content="rust, rustlang, rust-lang, config"><title>cargo_hakari::config - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../cargo_hakari/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><h2 class="location">Module config</h2><div class="sidebar-elems"><div id="sidebar-vars" data-name="config" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input"name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">cargo_hakari</a>::<wbr><a class="mod" href="#">config</a><button id="copy-path" onclick="copy_path(this)" title="copy path"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item import" title="Copy item import to clipboard"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/cargo_hakari/config.rs.html#4-142" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Configuration for <code>cargo hakari</code>.</p>
<p>Set these config options in <code>.guppy/hakari.toml</code> at the root of the workspace.</p>
<h1 id="common-options" class="section-header"><a href="#common-options">Common options</a></h1><h2 id="hakari-package" class="section-header"><a href="#hakari-package">hakari-package</a></h2>
<p>The name of the hakari-managed crate in the workspace. For example:</p>
<div class="example-wrap"><pre class="language-toml">hakari-package = &quot;my-workspace-hack&quot;</pre></div><h2 id="resolver" class="section-header"><a href="#resolver">resolver</a></h2>
<p>The version of the Cargo feature resolver to use. Version 2 is highly recommended.
For more, see this <a href="https://blog.rust-lang.org/2021/03/25/Rust-1.51.0.html#cargos-new-feature-resolver">Rust blog post</a>.</p>
<div class="example-wrap"><pre class="language-toml">resolver = &quot;2&quot;</pre></div><h2 id="platforms" class="section-header"><a href="#platforms">platforms</a></h2>
<p>Platforms to run specific queries on.</p>
<p>By default, <code>cargo hakari</code> produces the minimal set of features that can be unified across
all possible platforms. However, in practice, most developers on a codebase use one of a
few platforms. <code>cargo hakari</code> can run specific queries for a few platforms, producing better
results for them.</p>
<div class="example-wrap"><pre class="language-toml"># Unify features on x86_64 Linux, Mac and Windows.
platforms = [
     &quot;x86_64-unknown-linux-gnu&quot;,
     &quot;x86_64-apple-darwin&quot;,
     &quot;x86_64-pc-windows-msvc&quot;,
]</pre></div><h2 id="traversal-excludes" class="section-header"><a href="#traversal-excludes">traversal-excludes</a></h2>
<p>Crates to exclude while traversing the dependency graph.</p>
<p>Packages specified in <code>traversal-excludes</code> will be omitted while searching for dependencies.
These packages will not be included in the final output. Any transitive dependencies of
these packages will not be included in the final result, unless those dependencices are reachable
from other crates.</p>
<p>This is generally useful for crates that have mutually exclusive features, and that turn on
mutually exclusive features in their transitive dependencies.</p>
<div class="example-wrap"><pre class="language-toml">[traversal-excludes]
workspace-members = [&quot;my-crate&quot;, &quot;my-other-crate&quot;]
third-party = [
    # Third-party crates accept semver ranges.
    { name = &quot;mutually-exclusive-crate&quot;, version = &quot;1.0&quot; },

    # The version specifier can be skipped to include all versions of a crate.
    # (Cryptography-related crates often use features to switch on different backends.)
    { name = &quot;my-cryptography&quot; },

    # Git and path dependencies can also be specified
    { name = &quot;git-dependency&quot;, git = &quot;https://github.com/my-org/git-dependency&quot; },
    { name = &quot;path-dependency&quot;, path = &quot;../my/path/dependency&quot; }
]</pre></div><h2 id="final-excludes" class="section-header"><a href="#final-excludes">final-excludes</a></h2>
<p>Crates to remove at the end of computation.</p>
<p>Packages specified in <code>final-excludes</code> will be removed from the output at the very end. This
means that any transitive dependencies of theirs will still be included.</p>
<p>This is generally useful for crates that have mutually exclusive features.</p>
<p>This accepts configuration in the same format as <code>traversal-excludes</code> above.</p>
<div class="example-wrap"><pre class="language-toml">[final-excludes]
workspace-members = [&quot;my-crate&quot;, &quot;your-crate&quot;]
third-party = [
    # The &quot;fail&quot; crate uses the &quot;failpoints&quot; feature to enable random errors at runtime.
    # It is a good candidate for exclusion from the final output.
    { name = &quot;fail&quot; },

    # Version specifiers and git/path dependencies work similarly to traversal-excludes
    # above.
]</pre></div><h1 id="output-options" class="section-header"><a href="#output-options">Output options</a></h1><h2 id="exact-versions" class="section-header"><a href="#exact-versions">exact-versions</a></h2>
<p>By default, the workspace-hack crate’s <code>Cargo.toml</code> file will contain a semver range. With
<code>exact-versions</code> turned on, the version currently in use will be output.</p>
<p>This is most useful for situations where the <code>Cargo.lock</code> file is checked in, and if
version numbers are kept in sync across <code>Cargo.toml</code> and <code>Cargo.lock</code>. This includes some
configurations of <a href="https://dependabot.com/">Dependabot</a>.</p>
<div class="example-wrap"><pre class="language-toml">exact-versions = true</pre></div><h1 id="advanced-options" class="section-header"><a href="#advanced-options">Advanced options</a></h1><h2 id="unify-target-host" class="section-header"><a href="#unify-target-host">unify-target-host</a></h2>
<p>Controls unification across target and host platforms.</p>
<p>With version 2 of the feature resolver, if the same crate is included on both the target and
host platforms, it may be built in two different ways. This is not always desirable, and
<code>cargo hakari</code> can unify dependencies such that they’re only built one way.</p>
<p>The possible options are <code>&quot;none&quot;</code>, <code>&quot;unify-on-both&quot;</code>, and <code>&quot;replicate-target-on-host&quot;</code>
(default). For more about these options, see the documentation for
<a href="../../hakari/hakari/enum.UnifyTargetHost.html"><code>UnifyTargetHost</code></a>.</p>
<div class="example-wrap"><pre class="language-toml">unify-target-host = &quot;replicate-host-on-target&quot;</pre></div><h2 id="output-single-feature" class="section-header"><a href="#output-single-feature">output-single-feature</a></h2>
<p>By default, <code>cargo hakari</code> only outputs lines corresponding to third-party dependencies which
are built with at least two different sets of features. Setting this option to true will
cause <code>cargo hakari</code> to output lines corresponding to dependencies built with just one set
of features.</p>
<p>This is generally not needed but may be useful in some situations.</p>
<div class="example-wrap"><pre class="language-toml">output-single-feature = true</pre></div></div></details></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="cargo_hakari" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script>
</body></html>